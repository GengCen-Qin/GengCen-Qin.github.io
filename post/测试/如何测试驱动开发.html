<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    
    
        
            
                <link rel="shortcut icon" href="/images/favicon.ico">
            
        
        
            
                <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
            
        
        
            
                <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
            
        
    
    <!-- title -->
    <title>如何测试驱动开发</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+SC&display=swap" rel="stylesheet">
    <link href="https://cdn.staticfile.org/firacode/6.2.0/fira_code.min.css" rel="stylesheet">
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.4.2"></head>

<body class="max-width mx-auto px3 ltr">

    <div id="header-post">
    <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
    <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
    <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i
                class="fas fa-chevron-up fa-lg"></i></a>
    <span id="menu">
    <span id="nav">
      <ul>
          
              <li><a href="/">首页</a></li>
          
              <li><a href="/about/">关于</a></li>
          
              <li><a href="/archives/">归档</a></li>
          
              <li><a href="/categories/">分类</a></li>
          
              <li><a target="_blank" rel="noopener" href="https://github.com/GengCen-Qin">项目</a></li>
          
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
          
              <li><a class="icon" href="/post/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E9%97%AE%E9%A2%98%E8%A7%A3%E6%83%91.html"><i class="fas fa-chevron-left"
                                                                           aria-hidden="true"
                                                                           onmouseover="$('#i-prev').toggle();"
                                                                           onmouseout="$('#i-prev').toggle();"></i></a></li>
          
          
              <li><a class="icon" href="/post/Ruby/%E5%8F%91%E5%B8%83%E8%87%AA%E5%B7%B1%E7%9A%84GEM.html"><i class="fas fa-chevron-right"
                                                                           aria-hidden="true"
                                                                           onmouseover="$('#i-next').toggle();"
                                                                           onmouseout="$('#i-next').toggle();"></i></a></li>
          
          <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i
                          class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();"
                          onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true"
                                        onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();"
                                        onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
    <li><a class="icon"
           target="_blank" rel="noopener" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://www.chengling.cloud/post/%E6%B5%8B%E8%AF%95/%E5%A6%82%E4%BD%95%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91.html&title=如何测试驱动开发"><i
                    class="fab fa-qq " aria-hidden="true"></i></a></li>
    <li><a class="icon"
           target="_blank" rel="noopener" href="https://service.weibo.com/share/share.php?url=http://www.chengling.cloud/post/%E6%B5%8B%E8%AF%95/%E5%A6%82%E4%BD%95%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91.html&title=如何测试驱动开发"><i
                    class="fab fa-weibo " aria-hidden="true"></i></a></li>
    <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://www.chengling.cloud/post/%E6%B5%8B%E8%AF%95/%E5%A6%82%E4%BD%95%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91.html&text=如何测试驱动开发"><i
                    class="fab fa-twitter " aria-hidden="true"></i></a></li>
    <li><a class="icon" href="mailto:?subject=如何测试驱动开发&body=Check out this article: http://www.chengling.cloud/post/%E6%B5%8B%E8%AF%95/%E5%A6%82%E4%BD%95%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91.html"><i
                    class="fas fa-envelope " aria-hidden="true"></i></a></li>
</ul>
    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#TDD%E7%BA%AA%E5%BE%8B"><span class="toc-number">1.</span> <span class="toc-text">TDD纪律</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TDD%E4%B8%89%E6%B3%95%E5%88%99"><span class="toc-number">2.</span> <span class="toc-text">TDD三法则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.</span> <span class="toc-text">简单示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%88"><span class="toc-number">3.1.</span> <span class="toc-text">栈</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

<div class="content index py4">
    
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        如何测试驱动开发
    </h1>

      <div class="meta">
        <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <span itemprop="name">
            
                  庚辰
                    
          </span>
        </span>
        
    <div class="postdate">
        
            <time datetime="2023-09-10T09:24:42.000Z"
                  itemprop="datePublished">2023-09-10</time>
            
                (Updated:
                <time datetime="2023-09-10T09:15:51.616Z"
                      itemprop="dateModified">2023-09-10</time>)
            
        
    </div>

          
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Ruby/">Ruby</a>
    </div>

            
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/%E6%B5%8B%E8%AF%95/" rel="tag">测试</a>
    </div>

      </div>
  </header>
  
    <div class="content" itemprop="articleBody">
      <blockquote>
<p>前言</p>
</blockquote>
<p>​    最近在读《匠艺整洁之道-程序员的职业修养》这本书，作者鲍勃大叔开篇就用了大量的示例来讨论与演示为什么需要和如何操作测试驱动开发。我是之前写过测试，但从不知道测试如何驱动开发，大部分情况下也只是先写生产代码，写好后再测试，看看是否能调通，再修改代码中隐藏的问题。<br>​    而测试驱动开发会扭转这种思维方式，是先写测试，再写对应的生产代码。这一开始让人会觉得很奇怪，感觉并且很麻烦，但当你尝试一下，就会发现这事儿挺有趣，且神奇。<br>​    温馨提示：<a target="_blank" rel="noopener" href="https://learning.oreilly.com/videos/clean-craftsmanship-disciplines/9780137676385/9780137676385-CCC1_clean_craftsmanship_stack/">Clean Craftsmanship: Disciplines, Standards, and Ethics (Companion Videos)</a>，这个是该书示例操作的视频说明，<strong>非常非常非常有用！！！</strong> 第一篇是讲述如何通过测试驱动开发来写一个栈结构。我严重怀疑大叔是不是一边写代码一边喝啤酒。整个过程伴随大叔魔性的笑声和宛如魔法般的操作，就好像他在不停调戏编译器。你会通过这个视频感受到如何从零开始，进行测试驱动开发。<br>​    下面将讲讲一些基础知识。</p>
<blockquote>
<p>为什么需要测试驱动开发？</p>
</blockquote>
<p>​    就我目前的现状，我能感受到重构代码时的痛苦，在目前维护的项目中会遇到几百行的函数，整个函数要做太多的事儿，而且相互耦合在一起，如果这里的需求不变，我不会去碰它，但需求是一直变化的，我只能不断去读这些代码，然后小心翼翼的在里面修改。当上线时心惊胆战，生怕出问题。我希望有一套良好的测试能在我修改代码后告诉我哪里受到了影响，并在测试通过后，能让我安心上线。</p>
<h2 id="TDD纪律"><a href="#TDD纪律" class="headerlink" title="TDD纪律"></a>TDD纪律</h2><ol>
<li>创建测试集，方便重构，并且其可信程度达到系统可部署的水平，也就是说测试集通过，系统就可以部署。<ol>
<li>我不知道有多少人像我一样，由于老系统没有测试，导致每次上线都很害怕，担心修改引入新的问题。</li>
</ol>
</li>
<li>创建足够解耦，可测试，可重构的代码</li>
<li>创建极短的反馈循环周期</li>
<li>创建相互解耦的测试代码和生产代码</li>
</ol>
<p>上面的纪律需要下面展示的法则作为基础，如果没有一些技巧和知识就很难遵守这些法则。</p>
<h2 id="TDD三法则"><a href="#TDD三法则" class="headerlink" title="TDD三法则"></a>TDD三法则</h2><p><strong>第一法则</strong>：在编写因为缺少生产代码而必然会失败的测试之前，绝不编写生产代码<br><strong>第二法则</strong>：只写刚好导致失败或者通不过编译的测试，编写生产代码来解决失败的问题<br><strong>第三法则</strong>:  只写刚好能解决当前测试失败问题的生产代码。测试通过后，立即写其他测试代码<br>整个过程看起来好像是：</p>
<ul>
<li>写一行测试代码，无法通过编译</li>
<li>写一行生产代码，编译成功</li>
<li>写另一行测试代码，无法通过编译</li>
<li>再写生产代码，编译成功</li>
<li>再写测试代码，编译能成功，但断言失败</li>
<li>写一两行生产代码，满足断言</li>
</ul>
<p>如此循环，贯穿始终</p>
<blockquote>
<p>遵守上述法则后，有以下好处</p>
</blockquote>
<ul>
<li>提高效率，减少调试的时间</li>
<li>将产出一套低层次文档</li>
<li>好玩</li>
<li>将产出一套测试集，让你有信息部署系统</li>
<li>将创建较少耦合的代码<h2 id="简单示例"><a href="#简单示例" class="headerlink" title="简单示例"></a>简单示例</h2><h3 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h3><blockquote>
<p>这里建议先看我上面提供的链接，作者是用Java写的，我这里用Ruby(核心思想是一致的)</p>
</blockquote>
</li>
</ul>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'minitest/autorun'</span></span>
<span class="token keyword">class</span> <span class="token class-name">StackTest</span> <span class="token operator">&lt;</span> Minitest<span class="token double-colon punctuation">::</span>Test
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_nothing</span></span>
    
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    这里我们一开始写一个什么都不做的测试，然后保证这个测试通过，这至少能说明你的环境没问题</p>
<hr>
<p>规则1：先编写测试，逼着自己写将要写的代码</p>
<hr>
<p>​    我们知道我们需要一个栈</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment"># stack_test.rb</span>
<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'minitest/autorun'</span></span>
<span class="token keyword">class</span> <span class="token class-name">StackTest</span> <span class="token operator">&lt;</span> Minitest<span class="token double-colon punctuation">::</span>Test
  <span class="token comment"># ...</span>
  
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_canCreateStack</span></span>
    stack <span class="token operator">=</span> <span class="token class-name">Stack</span><span class="token punctuation">.</span><span class="token keyword">new</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    这里的测试一定会失败，因为现在根本没有<code>Stack</code>这个类结构，所以我们写两行生产代码来通过测试</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment"># stack.rb</span>
<span class="token keyword">class</span> <span class="token class-name">Stack</span>
  
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    这次我们在<code>stack_test.rb</code>引入一下，就可以通过测试了。</p>
<hr>
<p>规则2：让测试失败，让测试通过，清理代码</p>
<hr>
<p>​    这时候我们发现我们还没有断言行为呢，比如当刚创建一个栈时，这个栈应该是空的。</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment"># stack_test.rb</span>

<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'minitest/autorun'</span></span>
require_relative <span class="token string-literal"><span class="token string">'stack'</span></span>
<span class="token keyword">class</span> <span class="token class-name">StackTest</span> <span class="token operator">&lt;</span> Minitest<span class="token double-colon punctuation">::</span>Test
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_nothing</span></span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_canCreateStack</span></span>
    stack <span class="token operator">=</span> <span class="token class-name">Stack</span><span class="token punctuation">.</span><span class="token keyword">new</span>
    assert<span class="token punctuation">(</span>stack<span class="token punctuation">.</span>isEmpty<span class="token operator">?</span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token comment"># => 报错：NoMethodError: undefined method `isEmpty?'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    我们迅速补上生产代码，来解决这个问题</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment"># stack.rb</span>

<span class="token keyword">class</span> <span class="token class-name">Stack</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">isEmpty</span></span><span class="token operator">?</span>
    <span class="token boolean">false</span> 
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    这样改后，方法可以找到了，但断言失败了，这里我们是故意的，为什么这么做呢？第一法则：测试必须失败，为啥呢？因为当测试应该失败时，我们就能看到它失败，我们测试了自己的测试。当我们将上面的方法返回true时，就能测试另一半了。</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment"># stack.rb</span>

<span class="token keyword">class</span> <span class="token class-name">Stack</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">isEmpty</span></span><span class="token operator">?</span>
    <span class="token boolean">true</span> 
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    这时候执行测试，测试通过，万事大吉，你一定会骂这不是作弊吗，但等等，至少我们只用几秒就能测出该通过时通过，该失败时失败。</p>
<p>​    下一个要测的是，栈需要能push吧</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment"># stack_test.rb</span>

<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'minitest/autorun'</span></span>
require_relative <span class="token string-literal"><span class="token string">'stack'</span></span>
<span class="token keyword">class</span> <span class="token class-name">StackTest</span> <span class="token operator">&lt;</span> Minitest<span class="token double-colon punctuation">::</span>Test
  <span class="token comment"># ...</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_canPush</span></span>
    stack <span class="token operator">=</span> <span class="token class-name">Stack</span><span class="token punctuation">.</span><span class="token keyword">new</span>
    stack<span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    这里会报错，因为找不到方法，我们就跟着改改生产代码</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment"># stack.rb</span>

<span class="token keyword">class</span> <span class="token class-name">Stack</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">isEmpty</span></span><span class="token operator">?</span>
    <span class="token boolean">true</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">push</span></span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    执行测试，测试通过，但这里我们没有断言啊，那既然push了，栈就不应为空吧</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'minitest/autorun'</span></span>
require_relative <span class="token string-literal"><span class="token string">'stack'</span></span>
<span class="token keyword">class</span> <span class="token class-name">StackTest</span> <span class="token operator">&lt;</span> Minitest<span class="token double-colon punctuation">::</span>Test
  <span class="token comment"># ...</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_canPush</span></span>
    stack <span class="token operator">=</span> <span class="token class-name">Stack</span><span class="token punctuation">.</span><span class="token keyword">new</span>
    stack<span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    refute<span class="token punctuation">(</span>stack<span class="token punctuation">.</span>isEmpty<span class="token operator">?</span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    执行测试，断言失败，因为我们返回的一直是true，那改改代码吧</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">Stack</span>
  attr_accessor <span class="token symbol">:empty</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">initialize</span></span>
    <span class="token variable">@empty</span> <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">isEmpty</span></span><span class="token operator">?</span>
    empty
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">push</span></span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span>
    <span class="token variable">@empty</span> <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    我们抽离出一个实例变量来保存是否为空，并在push后直接暴力设置为false。这时候测试又能通过了<br>我们发现没写一个测试方法，都要创建一个栈，太麻烦了，于是我们重构一下，使用<code>setup方法</code></p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'minitest/autorun'</span></span>
require_relative <span class="token string-literal"><span class="token string">'stack'</span></span>

<span class="token keyword">class</span> <span class="token class-name">StackTest</span> <span class="token operator">&lt;</span> Minitest<span class="token double-colon punctuation">::</span>Test
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">setup</span></span>
    <span class="token variable">@stack</span> <span class="token operator">=</span> <span class="token class-name">Stack</span><span class="token punctuation">.</span><span class="token keyword">new</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_nothing</span></span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_canCreateStack</span></span>
    assert<span class="token punctuation">(</span><span class="token variable">@stack</span><span class="token punctuation">.</span>isEmpty<span class="token operator">?</span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_canPush</span></span>
    <span class="token variable">@stack</span><span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    refute<span class="token punctuation">(</span><span class="token variable">@stack</span><span class="token punctuation">.</span>isEmpty<span class="token operator">?</span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    测试依然能通过，不过canPush这个测试名不太好，我们改改（test_操作_结果）</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_afterOnePush_isEmpty</span></span>
    <span class="token variable">@stack</span><span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    refute<span class="token punctuation">(</span><span class="token variable">@stack</span><span class="token punctuation">.</span>isEmpty<span class="token operator">?</span><span class="token punctuation">)</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    当然测试还是能通过</p>
<p>​    这时候我们测试，栈push一次，也能pop一次吧，并且这时候栈应该为空</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_afterOnePushAndOnePop_isEmpty</span></span>
    <span class="token variable">@stack</span><span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token variable">@stack</span><span class="token punctuation">.</span>pop
    assert<span class="token punctuation">(</span><span class="token variable">@stack</span><span class="token punctuation">.</span>isEmpty<span class="token operator">?</span><span class="token punctuation">)</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    测试失败，因为没有这个方法</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">Stack</span>
  <span class="token comment"># ...</span>
  
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">pop</span></span>
    <span class="token variable">@empty</span> <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    现在测试又通过了，现在我们测试两次push之后，栈的尺寸应该是2</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_afterTwoPushs_sizeIsTwo</span></span>
    <span class="token variable">@stack</span><span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token variable">@stack</span><span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    assert_equal<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token variable">@stack</span><span class="token punctuation">.</span>size<span class="token punctuation">)</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    测试失败，因为没有这个方法，我们修改生产代码</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">Stack</span>
  attr_accessor <span class="token symbol">:empty</span><span class="token punctuation">,</span><span class="token symbol">:size</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">initialize</span></span>
    <span class="token variable">@empty</span> <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token variable">@size</span> <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">isEmpty</span></span><span class="token operator">?</span>
    empty
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">push</span></span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span>
    <span class="token variable">@size</span> <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token variable">@empty</span> <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">pop</span></span>
    <span class="token variable">@empty</span> <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    我们定义size实例变量来保存状态，并在每次push时，size+1，这样断言通过。为了测试完整，我们再加一个测试</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_afterOnePush_isNotEmpty</span></span>
    <span class="token variable">@stack</span><span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    refute<span class="token punctuation">(</span><span class="token variable">@stack</span><span class="token punctuation">.</span>isEmpty<span class="token operator">?</span><span class="token punctuation">)</span>
    assert_equal<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token variable">@stack</span><span class="token punctuation">.</span>size<span class="token punctuation">)</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    测试通过。回到第一法则，如果对空栈执行pop操作，应该会有个异常吧</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_poppingEmptyStack_raisesUnderflow</span></span>
    assert_raises <span class="token keyword">do</span>
      <span class="token variable">@stack</span><span class="token punctuation">.</span>pop
    <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    测试失败，我们还没定义这个异常类</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">Underflow</span> <span class="token operator">&lt;</span> StandardError
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>​    断言失败，我们再修改生产代码</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby">require_relative <span class="token string-literal"><span class="token string">'underflow'</span></span>
<span class="token keyword">class</span> <span class="token class-name">Stack</span>
  <span class="token comment"># ...</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">pop</span></span>
    <span class="token keyword">raise</span> Underflow <span class="token keyword">if</span> isEmpty<span class="token operator">?</span>
    <span class="token variable">@empty</span> <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    测试通过，再测试：当栈push一个数据时，也应该pop出相同的数据吧</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_afterPushingX_willPopX</span></span>
    <span class="token variable">@stack</span><span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    assert_equal<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token variable">@stack</span><span class="token punctuation">.</span>pop<span class="token punctuation">)</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    测试失败，调整生产代码，我们加一个实例变量保存信息</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby">require_relative <span class="token string-literal"><span class="token string">'underflow'</span></span>
<span class="token keyword">class</span> <span class="token class-name">Stack</span>
  attr_accessor <span class="token symbol">:empty</span><span class="token punctuation">,</span><span class="token symbol">:size</span><span class="token punctuation">,</span><span class="token symbol">:element</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">initialize</span></span>
    <span class="token variable">@empty</span> <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token variable">@size</span> <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">isEmpty</span></span><span class="token operator">?</span>
    empty
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">push</span></span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span>
    <span class="token variable">@size</span> <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token variable">@empty</span> <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token variable">@element</span> <span class="token operator">=</span> ele
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">pop</span></span>
    <span class="token keyword">raise</span> Underflow <span class="token keyword">if</span> isEmpty<span class="token operator">?</span>
    <span class="token variable">@empty</span> <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token variable">@element</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    测试通过，已经写了这么多代码，你看的都崩溃了，觉得直接写一个栈不就完了嘛</p>
<hr>
<p>规则3：别挖金子</p>
<hr>
<p>​    在最开始尝试TDD时，你会急于解决较难或有趣的问题，你可能先写FILO行为，这个就是挖金子，我们有意避免测试与栈行为有关的东西，专注与周边行为。例如栈是否为空或栈大小。<br>为什么避免挖金子，因为如果过早挖金子，可能忽略周边所有细节。现在我们根据第一法子，编写FILO测试</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_afterPushingXAndY_willPopYThenX</span></span>
    <span class="token variable">@stack</span><span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token variable">@stack</span><span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    assert_equal<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token variable">@stack</span><span class="token punctuation">.</span>pop<span class="token punctuation">)</span>
    assert_equal<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token variable">@stack</span><span class="token punctuation">.</span>pop<span class="token punctuation">)</span>
  <span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    测试失败，我们发现抛出了<code>Underflow</code>,我们修改一下<code>isEmpty?</code>方法</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby">require_relative <span class="token string-literal"><span class="token string">'underflow'</span></span>
<span class="token keyword">class</span> <span class="token class-name">Stack</span>
  <span class="token comment"># ...</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">isEmpty</span></span><span class="token operator">?</span>
    size <span class="token operator">==</span> <span class="token number">0</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    测试失败，<code>test_afterOnePushAndOnePop_isEmpty</code>这个测试中报错，好吧，我们在pop时没有size-1</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby">require_relative <span class="token string-literal"><span class="token string">'underflow'</span></span>
<span class="token keyword">class</span> <span class="token class-name">Stack</span>
  <span class="token comment"># ...</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">pop</span></span>
    <span class="token keyword">raise</span> Underflow <span class="token keyword">if</span> isEmpty<span class="token operator">?</span>
    <span class="token variable">@size</span> <span class="token operator">-=</span> <span class="token number">1</span>
    <span class="token variable">@empty</span> <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token variable">@element</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    就剩下最后一个断言失败了，FILO行为，我们开始修改</p>
<pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby">require_relative <span class="token string-literal"><span class="token string">'underflow'</span></span>
<span class="token keyword">class</span> <span class="token class-name">Stack</span>
  attr_accessor <span class="token symbol">:empty</span><span class="token punctuation">,</span><span class="token symbol">:size</span><span class="token punctuation">,</span><span class="token symbol">:elements</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">initialize</span></span>
    <span class="token variable">@empty</span> <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token variable">@size</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token variable">@elements</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">isEmpty</span></span><span class="token operator">?</span>
    size <span class="token operator">==</span> <span class="token number">0</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">push</span></span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span>
    <span class="token variable">@size</span> <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token variable">@empty</span> <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token variable">@elements</span> <span class="token operator">&lt;&lt;</span> ele
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">pop</span></span>
    <span class="token keyword">raise</span> Underflow <span class="token keyword">if</span> isEmpty<span class="token operator">?</span>
    ele <span class="token operator">=</span> <span class="token variable">@elements</span><span class="token punctuation">[</span>size<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token variable">@size</span> <span class="token operator">-=</span> <span class="token number">1</span>
    <span class="token variable">@empty</span> <span class="token operator">=</span> <span class="token boolean">true</span>
    ele
  <span class="token keyword">end</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>​    测试全部通过，我们已经完成了一个栈的基础行为啦，你会发现一个栈在我们不断测试中渐渐成型，虽然现在并不完善，但我们已经能感受到测试驱动开发的整个过程了。</p>
<p>​    也许你可以花点儿时间，利用测试驱动开发自己写一个队列结构。    </p>

    </div>
</article>



  <script>
    //检测推送
    var pushType = "";
    var pushLink = "";
    var siteName = "玲辰书斋";

    var ValineButton = document.getElementsByClassName("vsubmit vbtn")[0];
    //分情况推送
    if (pushType === "cp") {
      var title = siteName + "上又有新评论啦~!\n";
      function send_valine_CoolPush() {
        //获取元素信息
        var pagename = document.title;
        var wz = pagename.indexOf("|");
        var res = pagename.substring(0, wz);
        var pageurl = document.URL;
        var ptime = new Date();
        var vnick = document.getElementsByClassName("vnick vinput")[0].value;
        var vmail = document.getElementsByClassName("vmail vinput")[0].value;
        var vlink = document.getElementsByClassName("vlink vinput")[0].value;
        var veditor = document.getElementsByClassName("veditor vinput")[0].value;
        var data =
          "昵称: " +
          vnick +
          "\n\n邮箱: " +
          vmail +
          "\n\n网站地址: " +
          vlink +
          "\n\n当前页面: " +
          pagename +
          "\n\n评论内容: " +
          veditor +
          "\n\n跳转链接: " +
          pageurl +
          "\n\n评论时间: " +
          ptime.toLocaleString();
        var httpRequest = new XMLHttpRequest(); //第一步：创建需要的对象
        httpRequest.open("POST", pushLink, true); //第二步：打开连接
        httpRequest.setRequestHeader(
          "Content-type",
          "application/json"
        ); //设置请求头 注：post方式必须设置请求头（在建立连接后设置请求头）
        var payload = { "t": title, "c": data }
        httpRequest.send(JSON.stringify(payload)); //发送请求 将情头体写在send中
      }
      ValineButton.onclick = send_valine_CoolPush;
    }
  </script>
    
        <div id="footer-post-container">
    <div id="footer-post">

        <div id="nav-footer" style="display: none">
            <ul>
                
                    <li><a href="/">首页</a></li>
                
                    <li><a href="/about/">关于</a></li>
                
                    <li><a href="/archives/">归档</a></li>
                
                    <li><a href="/categories/">分类</a></li>
                
                    <li><a target="_blank" rel="noopener" href="https://github.com/GengCen-Qin">项目</a></li>
                
            </ul>
        </div>

        <div id="toc-footer" style="display: none">
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#TDD%E7%BA%AA%E5%BE%8B"><span class="toc-number">1.</span> <span class="toc-text">TDD纪律</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TDD%E4%B8%89%E6%B3%95%E5%88%99"><span class="toc-number">2.</span> <span class="toc-text">TDD三法则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.</span> <span class="toc-text">简单示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%88"><span class="toc-number">3.1.</span> <span class="toc-text">栈</span></a></li></ol></li></ol>
        </div>

        <div id="share-footer" style="display: none">
            <ul>
    <li><a class="icon"
           target="_blank" rel="noopener" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://www.chengling.cloud/post/%E6%B5%8B%E8%AF%95/%E5%A6%82%E4%BD%95%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91.html&title=如何测试驱动开发"><i
                    class="fab fa-qq fa-lg" aria-hidden="true"></i></a></li>
    <li><a class="icon"
           target="_blank" rel="noopener" href="https://service.weibo.com/share/share.php?url=http://www.chengling.cloud/post/%E6%B5%8B%E8%AF%95/%E5%A6%82%E4%BD%95%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91.html&title=如何测试驱动开发"><i
                    class="fab fa-weibo fa-lg" aria-hidden="true"></i></a></li>
    <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://www.chengling.cloud/post/%E6%B5%8B%E8%AF%95/%E5%A6%82%E4%BD%95%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91.html&text=如何测试驱动开发"><i
                    class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
    <li><a class="icon" href="mailto:?subject=如何测试驱动开发&body=Check out this article: http://www.chengling.cloud/post/%E6%B5%8B%E8%AF%95/%E5%A6%82%E4%BD%95%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91.html"><i
                    class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
</ul>
        </div>

        <div id="actions-footer">
            <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i
                        class="fas fa-bars fa-lg"
                        aria-hidden="true"></i> 菜单</a>
            <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i
                        class="fas fa-list fa-lg"
                        aria-hidden="true"></i> 目录</a>
            <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i
                        class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
            <a id="top" style="display:none" class="icon" href="#"
               onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg"
                                                                               aria-hidden="true"></i> 返回顶部
            </a>
        </div>

    </div>
</div>
    
    <footer id="footer">
  <div class="footer-top">
    &copy; 2025 <i class="fas fa-heart"></i>
    庚辰 
    <a href="http://www.beian.miit.gov.cn/" target="_blank">湘ICP备17005082号</a>
    
  </div>

  <div class="footer-bottom">
    
    <!-- tongji -->
    <script
      async
      src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"
    ></script>
    <span class="site-uv">
      <i class="fa fa-user"></i> 访问人数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
    <span class="site-pv">
      <i class="fa fa-eye"></i> 访问总量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
    <br />
      本网站由
    <a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank">
       又拍云 
    </a>
    提供CDN加速/云存储服务 
  </div>
</footer>

</div>
<!-- styles -->

<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.0.0/css/all.min.css">


<link rel="stylesheet" href="https://cdn.staticfile.org/justifiedGallery/3.7.0/css/justifiedGallery.min.css">

<!-- jquery -->

<script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>


<script src="https://cdn.staticfile.org/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

    
<script src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js"></script>

    <script type="text/javascript">
        $(function () {
            // copy-btn HTML
            var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
            btn += '<i class="far fa-clone"></i>';
            btn += '</span>';
            // mount it!
            $(".highlight .code pre").before(btn);
            var clip = new ClipboardJS('.btn-copy', {
                target: function (trigger) {
                    return trigger.nextElementSibling;
                }
            });
            clip.on('success', function (e) {
                e.trigger.setAttribute('aria-label', "复制成功!");
                e.clearSelection();
            })
        })
    </script>


<script src="/js/main.js"></script>

<!-- search -->

</body>

</html>